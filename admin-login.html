<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Admin Login</title>
        <link rel="stylesheet" href="./css/main.min.css">
    </head>

    <body class="bg-light">
        <!-- For medium and larger screens -->
        <div class="container-fluid d-none d-md-block">
            <div class="row vh-100">
                <!-- Left Side: Image -->
                <div class="col-md-6"
                    style="background: url('./images/Admin-cuate (1).svg') center center / cover no-repeat;"></div>
                <!-- Right Side: Login Form -->
                <div class="col-md-6 d-flex align-items-center justify-content-center ">
                    <div class="card border-0 bg-light w-100 overflow-hidden rounded-5" style="max-width: 400px;">
                        <div class="card-body ">
                            <h4 class="mb-4 heading-6">Admin Login
                            </h4>
                            <form id="loginForm" novalidate>
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email address</label>
                                    <input type="email" class="form-control" id="email" required />
                                    <div class="invalid-feedback">Please enter a valid email address.</div>
                                </div>
                                <div class="mb-3">
                                    <label for="password" class="form-label">Password</label>
                                    <input type="password" class="form-control" id="password" required />
                                    <div class="invalid-feedback">Please enter your password.</div>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Login</button>
                            </form>
                            <div id="loginMessage" class="mt-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid d-md-none"
            style="background: url('./images/Admin-cuate (1).svg') center center / cover no-repeat; min-height: 100vh;">
            <div class="row vh-100">
                <div class="col-12 d-flex align-items-center justify-content-center ">
                    <!-- A semi-transparent overlay so the card stands out -->
                    <div class="w-100 rounded-5" style="max-width: 400px; background-color: rgba(255, 255, 255, 0.9);">
                        <div class="card border-0">
                            <div class="card-body rounded-5 overflow-hidden">
                                <h4 class="card-title text-center mb-4">Admin Login</h4>
                                <form id="loginFormSmall" novalidate>
                                    <div class="mb-3">
                                        <label for="emailSmall" class="form-label">Email address</label>
                                        <input type="email" class="form-control" id="emailSmall" required />
                                        <div class="invalid-feedback">Please enter a valid email address.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="passwordSmall" class="form-label">Password</label>
                                        <input type="password" class="form-control" id="passwordSmall" required />
                                        <div class="invalid-feedback">Please enter your password.</div>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">Login</button>
                                </form>
                                <div id="loginMessageSmall" class="mt-3"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            // Function to handle login submission (used for both layouts)
            async function handleLogin(email, password, messageElem) {
                try {
                    const data = {
                        admin: {
                            email: 'admin@mobicomm.in',
                            password: 'admin123'
                        }
                    }
                    if (data.admin.email === email && data.admin.password === password) {
                        messageElem.innerHTML = '<div class="alert alert-success">Login successful!</div>';
                        window.location.href = 'admin.html';
                    } else {
                        messageElem.innerHTML = '<div class="alert alert-danger">Invalid email or password.</div>';
                    }
                } catch (error) {
                    console.error('Error during fetch:', error);
                    messageElem.innerHTML = '<div class="alert alert-danger">An error occurred. Please try again later.</div>';
                }
            }

            // Login form for md+ screens
            document.getElementById('loginForm').addEventListener('submit', async function (e) {
                e.preventDefault();
                if (!this.checkValidity()) {
                    this.classList.add('was-validated');
                    return;
                }
                const email = document.getElementById('email').value.trim();
                const password = document.getElementById('password').value;
                const messageElem = document.getElementById('loginMessage');
                await handleLogin(email, password, messageElem);
            });

            // Login form for small screens
            document.getElementById('loginFormSmall').addEventListener('submit', async function (e) {
                e.preventDefault();
                if (!this.checkValidity()) {
                    this.classList.add('was-validated');
                    return;
                }
                const email = document.getElementById('emailSmall').value.trim();
                const password = document.getElementById('passwordSmall').value;
                const messageElem = document.getElementById('loginMessageSmall');
                await handleLogin(email, password, messageElem);
            });
        </script>
    </body>

</html>